[uwsgi]
# Socket settings
socket = /code/run/uwsgi.sock
chmod-socket = 666
env = DJANGO_SETTINGS_MODULE=pikatrading.settings.prod
module = pikatrading.wsgi:application
master = true
processes = 1

# App directory
chdir = /code/pikatrading
pythonpath = /code/pikatrading

# User and group
uid = 1000
gid = 33

# Process Management
die-on-term = true
harakiri = 60
harakiri-verbose = true
enable-threads = true
thunder-lock = true
max-requests = 1000

# Request handling
buffer-size = 65535
post-buffering = 65535
socket-timeout = 60
http-timeout = 60
reload-mercy = 8
max-worker-lifetime = 3600

# Debug and logging settings
py-autoreload = 1
memory-report = true
log-date = true
log-5xx = true
log-4xx = true
log-micros = true
log-master = true
log-master-bufsize = 8192
logger = stdio
log-reopen = true
log-slow = true
log-ioerror = true
disable-logging = false

# Stats
stats = :1717
stats-http = true

# Development settings
vacuum = true

# Health check
route = ^/health$ rewrite:SCRIPT_NAME=/health